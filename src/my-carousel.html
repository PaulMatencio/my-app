<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="my-image-carousel-custom-styles.html">
<link rel="import" href="my-image-carousel-shared-styles.html">
<link rel="import" href="my-paper-icon-button-custom-styles.html">
<link rel="import" href="icon-toggle.html">
<link rel="import" href="my-image-carousel.html">

<dom-module id="my-carousel">

  <template>
    <style>
      :host {
        display: block;
        padding: 10px;
      }

      .toggle-icon{
        right: calc(var(--iron-icon-width,24px));
        bottom:  5px;
      }

      .navigation-icons {
        @apply --layout;
        @apply --layout-center;
        display: inline-flex;
        position: absolute;
        height: calc(var(--iron-icon-height, 24px) + 5px);
        background: var(--image-carousel-navigation-icon-color, rgba(255, 255, 255, 1));
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 25%;
        background-color:  white;
        cursor: pointer;
        /* @apply --navigation-icon-mixin; */
      }
      
      .toggle-icon:hover .stop::after{
        position: relative;
        content: 'Stop scrolling';
        color: white;
        background-color: black;
        padding: 3px 8px;
      }

      .toggle-icon:hover .start::after {
        position: relative;
        content: 'Start scrolling';
        color: white;
        background-color: black;
        padding: 3px 8px;
      }

    </style>
    <style include="shared-styles"></style>
    <custome-style>
        <style include="my-image-carousel-custom-styles"></style>
        <style include="my-paper-icon-button-custom-styles"></style>
    </custom-style>
    <style  include="my-image-carousel-shared-styles"></style>
    <iron-media-query query="max-width: 640px" query-matches="{{smallScreen}}"></iron-media-query>
    <dom-if if=[[!smallScreen]]>
      <template>
        <app-toolbar id="MyCarousel">
           <div main-title spacer>[[title]]</div>
           <div> {{label}}</div>
        </app-toolbar>
        </template>
    <dom-if>

    <!-- images are added by methid _appendImages( images) images is an array -->
    <my-image-carousel name="image-carousel" appendimage label="{{label}}" int="{{int}}" actions max="{{max}}">
    </my-image-carousel>

    <app-toolbar id="MyCarousel">
      <icon-toggle  toggle-icon="arrow-forward" pressed="{{autoscroll}}"></icon-toggle>
      <paper-icon-button icon="av:fast-rewind" class="light-blue"  title="Fist image" on-click="first_image"></paper-icon-button>
      <paper-icon-button icon="add-circle" class="light-blue" title="Increase interval" hidden$="[[!autoscroll]]" on-click="increase_interval"  ></paper-icon-button>
      <paper-icon-button icon="remove-circle" class="light-blue" title="Reduce interval" hidden$="[[!autoscroll]]" on-click="decrease_interval"></paper-icon-button>
      <paper-icon-button  icon="av:add-to-queue" class="light-blue" title="Add image to download" hidden$="[[autoscroll]]" on-click="add_to_queue"></paper-icon-button>
      <paper-icon-button icon="av:remove-from-queue" class="light-blue" title="Remove image from download"  hidden$="[[autoscroll]]" on-click="remove_from_queue"></paper-icon-button>
      <paper-icon-button icon="file-download" class="light-blue"  title="Download selected images" hidden$="[[autoscroll]]" on-click="download_images"></paper-icon-button>
      <paper-icon-button icon="av:fast-forward" class="light-blue" title="Last image" on-click="last_image"></paper-icon-button>
    </app-toolbar>

  </template>

  <script>

  class MyCarousel extends Polymer.Element {
    static get is() { return 'my-carousel'; }
    static get properties() {
      return {

        title: {
          type: String,
          value:"My Carousel"
        },

        label: {
          type: String,
          value:"",
          notify: true
        },

        images: {
            type : Array,
            value: getimages(),
            notify:true
        },

        int: {
          type: Number,
          value: 500,
          notify: true
        },
        max: {
          type: Number,
          value: 12000,
          notify: true
        },

        hosts: {
            type: String,
            // value: "https://app-layout-assets.appspot.com/",
            value: "../images/png/",
            notify: true
        },
        autoscroll: {
          type: Boolean,
          value: false,
          notify: true
        }


      };
    }

    ready() {
      super.ready();

      var element = this.shadowRoot.querySelector("my-image-carousel");
      this._appendImage(element);


    }

    _appendImage(element) {
      this.images.forEach( function(image){
        var img  = document.createElement("img");
        img.setAttribute('data-src', this.hosts + image );
        element.appendChild(img);
      },this);
    }

   }

   function  getimages() {
    return ["JP2004137757Ap10.png","JP2004137757Ap11.png","JP2004137757Ap12.png","JP2004137757Ap13.png","JP2004137757Ap1.png",
          "NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png","NL1010536C2p16.png","NL1010536C2p8.png",
          "NL1010536C2p17.png","NL1010536C2p9.png","JP2004137757Ap10.png","JP2004137757Ap11.png","JP2004137757Ap12.png",
          "JP2004137757Ap13.png","JP2004137757Ap1.png","NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png",
          "NL1010536C2p16.png","NL1010536C2p8.png","NL1010536C2p17.png","NL1010536C2p9.png","JP2004137757Ap10.png",
          "JP2004137757Ap11.png","JP2004137757Ap12.png","JP2004137757Ap13.png","JP2004137757Ap1.png",
          "NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png","NL1010536C2p16.png","NL1010536C2p8.png",
          "NL1010536C2p17.png","NL1010536C2p9.png","JP2004137757Ap10.png","JP2004137757Ap11.png","JP2004137757Ap12.png",
          "JP2004137757Ap13.png","JP2004137757Ap1.png","NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png",
          "NL1010536C2p16.png","NL1010536C2p8.png","NL1010536C2p17.png","NL1010536C2p9.png","JP2004137757Ap10.png",
          "JP2004137757Ap11.png","JP2004137757Ap12.png","JP2004137757Ap13.png","JP2004137757Ap1.png","NL1010536C2p13.png",
          "NL1010536C2p5.png","JP2004137757Ap2.png","NL1010536C2p16.png","NL1010536C2p8.png","NL1010536C2p17.png","NL1010536C2p9.png",
          "JP2004137757Ap10.png","JP2004137757Ap11.png","JP2004137757Ap12.png","JP2004137757Ap13.png","JP2004137757Ap1.png",
            "NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png","NL1010536C2p16.png","NL1010536C2p8.png","NL1010536C2p17.png","NL1010536C2p9.png"
        ];
   }


  window.customElements.define(MyCarousel.is, MyCarousel);
</script>

</dom-module>
