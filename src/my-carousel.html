<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-if.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="my-image-carousel-custom-styles.html">
<link rel="import" href="my-image-carousel-shared-styles.html">
<link rel="import" href="my-paper-icon-button-custom-styles.html">
<link rel="import" href="icon-toggle.html">
<link rel="import" href="my-image-carousel-mixin.html">
<link rel="import" href="my-image-carousel.html">

<dom-module id="my-carousel">

  <template>
    <style>
      :host {
        display: block;
        padding: 10px;
      }
    </style>
    <style include="shared-styles"></style>
    <custome-style>
        <style include="my-image-carousel-custom-styles"></style>
        <style include="my-paper-icon-button-custom-styles"></style>
    </custom-style>
    <style  include="my-image-carousel-shared-styles"></style>
    <iron-media-query query="max-width: 640px" query-matches="{{smallScreen}}"></iron-media-query>
    <dom-if if=[[!smallScreen]]>
      <template>
        <app-toolbar id="MyCarousel">
           <div main-title spacer>[[title]]</div>
           <div> {{label}}</div>
        </app-toolbar>
        </template>
    <dom-if>

    <!-- images are added by methid _appendImages( images) images is an array -->
    <my-image-carousel name="image-carousel"  autoscroll$= "{{autoscroll}}" appendimage label="{{label}}" int="{{int}}"  max="{{max}}">
    </my-image-carousel>

    <app-toolbar id="MyCarousel">

      <paper-icon-button icon="av:fast-rewind" class="light-blue big"  title="Fist image" on-click="first_image"></paper-icon-button>
      <paper-icon-button icon="add-circle" class="light-blue big" title="Increase interval" hidden$="[[!autoscroll]]" on-click="increase_interval"  ></paper-icon-button>
      <paper-icon-button icon="remove-circle" class="light-blue big " title="Reduce interval" hidden$="[[!autoscroll]]" on-click="decrease_interval"></paper-icon-button>
      <paper-icon-button  icon="av:add-to-queue" class="light-blue big " title="Add image to download" hidden$="[[autoscroll]]" on-click="add_to_queue"></paper-icon-button>
      <paper-icon-button icon="av:remove-from-queue" class="light-blue big" title="Remove image from download"  hidden$="[[autoscroll]]" on-click="remove_from_queue"></paper-icon-button>
      <paper-icon-button icon="file-download" class="light-blue big"  title="Download selected images" hidden$="[[autoscroll]]" on-click="download_images"></paper-icon-button>
      <paper-icon-button icon="av:fast-forward" class="light-blue big" title="Last image" on-click="last_image"></paper-icon-button>

      <div class="toggle-icon">
        <icon-toggle  toggle-icon="arrow-forward" pressed="{{autoscroll}}"></icon-toggle>
        <dom-if if="[[autoscroll]]">
          <template>
            <span class="stop"> </span>
          </template>
        </dom-if>
        <dom-if if="[[!autoscroll]]">
          <template>
            <span class="start">  </span>
          </template>
        </dom-if>

      </div>
    </app-toolbar>

  </template>

  <script>

  class MyCarousel extends MyMixin(Polymer.Element)  {

    static get is() { return 'my-carousel'; }

    static get properties() {

      return {
        title: {
          type: String,
          value:"My Carousel"
        },

        carousel: {
          type: Object
        },

        images: {
          type : Array,
          value: getimages()
        }
     }
   }

    constructor() {
      super();
    }

    ready() {
      super.ready();
      this.carousel = this.shadowRoot.querySelector("my-image-carousel");
      console.log(this.carousel);
      if (this.appendimage) {
          this._appendImage(this.carousel);
      }
    }

    next_image() {
      this.carousel.next_image();
    }

    previous_image() {
       this.carousel.previous_image();
    }

    first_image() {
       this.carousel.first_image();
    }

    last_image() {
      this.carousel.last_image();
    }

    increase_interval() {
      this.carousel.increase_interval();
    }

    decrease_interval() {
      this.carousel.decrease_interval();

    }

    set_interval() {
      this.carousel.set_interval();
    }

    add_to_queue() {
      this.carousel.add_to_queue();
    }

    remove_from_queue() {
      this.carousel.remove_from_queue();
    }

    download_images() {
      this.carousel.download_images();
    }


   _appendImage(element) {
      this.images.forEach( function(image){
        var img  = document.createElement("img");
        img.setAttribute('data-src', this.hosts + image );
        element.appendChild(img);
      },this);
    }


  }

  function  getimages() {
    return ["JP2004137757Ap10.png","JP2004137757Ap11.png","JP2004137757Ap12.png","JP2004137757Ap13.png","JP2004137757Ap1.png",
          "NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png","NL1010536C2p16.png","NL1010536C2p8.png",
          "NL1010536C2p17.png","NL1010536C2p9.png","JP2004137757Ap10.png","JP2004137757Ap11.png","JP2004137757Ap12.png",
          "JP2004137757Ap13.png","JP2004137757Ap1.png","NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png",
          "NL1010536C2p16.png","NL1010536C2p8.png","NL1010536C2p17.png","NL1010536C2p9.png","JP2004137757Ap10.png",
          "JP2004137757Ap11.png","JP2004137757Ap12.png","JP2004137757Ap13.png","JP2004137757Ap1.png",
          "NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png","NL1010536C2p16.png","NL1010536C2p8.png",
          "NL1010536C2p17.png","NL1010536C2p9.png","JP2004137757Ap10.png","JP2004137757Ap11.png","JP2004137757Ap12.png",
          "JP2004137757Ap13.png","JP2004137757Ap1.png","NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png",
          "NL1010536C2p16.png","NL1010536C2p8.png","NL1010536C2p17.png","NL1010536C2p9.png","JP2004137757Ap10.png",
          "JP2004137757Ap11.png","JP2004137757Ap12.png","JP2004137757Ap13.png","JP2004137757Ap1.png","NL1010536C2p13.png",
          "NL1010536C2p5.png","JP2004137757Ap2.png","NL1010536C2p16.png","NL1010536C2p8.png","NL1010536C2p17.png","NL1010536C2p9.png",
          "JP2004137757Ap10.png","JP2004137757Ap11.png","JP2004137757Ap12.png","JP2004137757Ap13.png","JP2004137757Ap1.png",
            "NL1010536C2p13.png", "NL1010536C2p5.png","JP2004137757Ap2.png","NL1010536C2p16.png","NL1010536C2p8.png","NL1010536C2p17.png","NL1010536C2p9.png"
        ];
   }


  window.customElements.define(MyCarousel.is, MyCarousel);
</script>

</dom-module>
